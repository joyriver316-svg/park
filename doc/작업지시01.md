# Park OS 기획 vs 현재 구현 분석 및 작업 지시

> **기준 문서**: PARKOS기획요약본_20260209.pdf
> **분석 대상**: F:\pro\park\react (Park & Play 프론트엔드)
> **작성일**: 2026-02-10

---

## 1. 기획 요약 (PDF 핵심 내용)

Park OS = **주차장 전용 운영체제(OS)**
"정산 프로그램이 아니라 주차장이라는 자산의 의사결정을 담당하는 OS"

### 핵심 모듈 4개
| # | 모듈명 | 설명 |
|---|--------|------|
| ① | **PHI (Parking Health Index)** | 가동률, 회전율, 평균 체류시간, 정기권 잠식도, 피크 병목 지수 → A/B/C/D 등급 |
| ② | **CIP Flow Engine** | 시간대·요일·월별 입출차 흐름, 히트맵/병목 시각화 |
| ③ | **Revenue Policy Simulator** | 요금 인상/인하, 외부차량 허용률, 정기권 증감, 할인권 정책 시뮬레이션 |
| ④ | **EV & Special Vehicle Module** | EV 체류시간 점유 기여도 vs 매출 기여도, EV 존 확장/축소 영향 |

### 기획 대시보드 구성 (5개 화면)
1. **메인 홈 (Executive Overview)** - KPI 카드 + 한 문장 진단 + 오늘의 액션 제안
2. **주차장 건강 리포트 (PHI View)** - PHI 지표 + 요일×시간대 Heatmap
3. **CIP Flow (주차장 MRI)** - 입차→체류→출차 흐름 + 체류시간 분포
4. **수익 시뮬레이터 (Policy Simulator)** - 정책 슬라이더 + 즉시 결과
5. **EV & 특수차량 분석** - EV 관련 지표 분석

### 기획 사용자 역할
| 역할 | 설명 |
|------|------|
| Super Admin | Park OS 운영자 |
| Owner | 주차장 소유주 |
| Operator | 운영사 대표 |
| Viewer | 조회 전용 |

### 기획 메뉴 구조
```
Login
└─ Home (Executive Dashboard)
   ├─ Parking Health (PHI)
   ├─ CIP Flow
   ├─ Revenue Simulator
   ├─ EV & Special Vehicle
   ├─ Reports
   └─ Settings
```

---

## 2. 현재 구현 현황 (기존 코드베이스)

### 현재 메뉴 구조 (14개 페이지)
| 메뉴 | 라우트 | 파일 |
|------|--------|------|
| AI 에이전트 | `/ai-agent` | AIAgent.jsx |
| 대시보드 | `/` | Dashboard.jsx |
| 통합 관제 | `/monitoring` | Monitoring.jsx |
| 주차장 관리 | `/parking-lots` | ParkingLotList.jsx |
| 요금 정책 | `/policies` | PolicyList.jsx |
| 정기권 관리 | `/regular-passes` | RegularPassList.jsx |
| 할인/프로모션 | `/discounts` | DiscountTicketList.jsx |
| 정산 및 계약 | `/settlements` | SettlementList.jsx |
| 매출 관리 | `/revenue` | RevenueReport.jsx |
| 입출차 로그 | `/logs` | EntryExitLogs.jsx |
| 사용자 관리 | `/users` | UserManagement.jsx |
| 시스템 설정 | `/settings` | Settings.jsx |
| 시스템 상태 | `/system-health` | SystemHealth.jsx |
| 테넌트 관리 | `/tenants` | TenantManagement.jsx |

### 현재 사용자 역할
- SUPER_ADMIN (슈퍼 어드민)
- OPERATOR (운영사 관리자)
- FIELD_MANAGER (현장 관리자)
- ACCOUNTANT (회계 담당자)

---

## 3. GAP 분석: 기획에는 있지만 현재 구현에 없는 것 (신규 개발 필요)

### 3-1. PHI (Parking Health Index) 페이지 - **완전 누락**
> 기획 핵심 모듈 ①번 — 가장 중요한 기능

**필요한 구현 내용:**
- [ ] PHI 전용 페이지 (`/parking-health`) 신규 생성
- [ ] **가동률** 지표 카드 (전체 면수 대비 점유 면수 비율)
- [ ] **회전율** 지표 카드 (하루 동안 한 면에 몇 대가 이용했는가)
- [ ] **평균 체류시간** 지표 (주차권별: 정기권/무료차량/할인권/일반권/일주차)
- [ ] **정기권 잠식도** 지표 (정기권이 시간제 매출 공간을 얼마나 먹고 있는가)
- [ ] **피크 병목 지수** (피크시간대 어떤 주차권 차량에 의해 병목이 발생하는가)
- [ ] **종합 점수** A/B/C/D 등급 표시
- [ ] **요일 × 시간대 Heatmap** (빨간 구간=돈 막히는 시간, 파란 구간=잠자는 시간)
- [ ] 주차장별 필터링

**수정 의견:**
- Recharts 라이브러리로 Heatmap 구현 가능 (커스텀 ScatterChart 또는 별도 heatmap 라이브러리 추가 검토)
- `nivo` 라이브러리의 `@nivo/heatmap`이 Heatmap에 더 적합할 수 있음
- PHI 등급(A/B/C/D)은 각 지표에 가중치를 부여하여 종합 점수를 산출하는 로직 필요
- mockData에 시간대별/요일별 입출차 데이터 추가 필요

---

### 3-2. CIP Flow Engine 페이지 - **완전 누락**
> 기획 핵심 모듈 ②번 — "주차장 MRI"

**필요한 구현 내용:**
- [ ] CIP Flow 전용 페이지 (`/cip-flow`) 신규 생성
- [ ] **입차→체류→출차 흐름** Sankey 다이어그램 또는 Flow 시각화
- [ ] **체류시간 분포 그래프** (히스토그램 형태)
- [ ] **장기 체류 차량 비율** 지표
- [ ] **시간대·요일·월별** 입출차 흐름 차트
- [ ] **히트맵/병목 시각화** (시간대별 입출차 밀도)
- [ ] 주차권 유형별 필터 (EV/정기권/외부차량 등)

**수정 의견:**
- Sankey 다이어그램은 `recharts`로 직접 구현이 어려움 → `d3-sankey` 또는 `@nivo/sankey` 추가 검토
- 간소화 방안: 입차/체류/출차를 3단계 Funnel Chart로 대체 가능
- 체류시간 분포는 BarChart(히스토그램)로 구현 가능
- "누가 공간을 잡아먹는가" — 주차권 유형별 점유 비율 파이차트 추가

---

### 3-3. Revenue Policy Simulator 페이지 - **완전 누락**
> 기획 핵심 모듈 ③번 — "바꾸면 얼마가 달라지는가?"

**필요한 구현 내용:**
- [ ] 수익 시뮬레이터 전용 페이지 (`/revenue-simulator`) 신규 생성
- [ ] **좌측: 정책 슬라이더** UI
  - 시간당 요금 슬라이더
  - 외부차량 허용률 슬라이더
  - 정기권 수량 슬라이더
  - 할인율 슬라이더
- [ ] **우측: 즉시 결과** 시각화
  - 월 매출 변화 (Before/After 비교)
  - 가동률 변화
  - 회전율 변화
- [ ] 요금 인상/인하 시 매출 변화 예측
- [ ] 정기권 증감 시 영향 분석
- [ ] 할인권 정책 변경 영향 분석

**수정 의견:**
- 시뮬레이션 로직은 프론트엔드에서 간단한 수학 모델로 먼저 구현 가능
  - 예: `예상매출 = 기본요금 × 예상입차대수 × (1 - 할인율) + 정기권수 × 정기권가격`
- 슬라이더는 HTML range input 또는 `rc-slider` 라이브러리 활용
- Before/After 비교는 BarChart 2개 병렬 배치 또는 Gauge 차트 활용
- 현재 PolicyList의 데이터를 기본값으로 연동하면 자연스러움

---

### 3-4. EV & Special Vehicle Module 페이지 - **완전 누락**
> 기획 핵심 모듈 ④번

**필요한 구현 내용:**
- [ ] EV 전용 분석 페이지 (`/ev-analysis`) 신규 생성
- [ ] **EV 평균 체류시간** 지표
- [ ] **EV 점유율 vs 매출 기여도** 비교 차트
- [ ] **EV 존 효율성 점수**
- [ ] EV 존 확장/축소 시 영향 시뮬레이션
- [ ] EV 충전기 상태 연동 (현재 Monitoring 페이지와 연계)

**수정 의견:**
- EV 관련 mockData 신규 생성 필요 (EV 차량 입출차, 충전 데이터)
- 점유율 vs 매출 기여도는 Dual-Axis BarChart로 표현 가능
- 현재 Monitoring 페이지의 장비 데이터와 연계하면 좋음
- 초기에는 간단한 지표 카드 + 차트 수준으로 구현하고 점진적 고도화

---

### 3-5. 대시보드 (Executive Overview) 개선 - **부분 누락**
> 현재 대시보드에 기획의 핵심 요소가 빠져 있음

**현재 대시보드에 없는 기획 요소:**
- [ ] **한 문장 진단** 기능
  - 예: "현재 정기권 점유가 과도하여, 시간제 매출 손실이 발생 중입니다."
- [ ] **오늘의 액션 제안 (Action Card)** 섹션
  - 예: "평일 14~17시 외부차량 +15% 허용 권장"
  - 예: "야간 요금 +1,000원 시 월 +320만원 가능"
  - 예: "EV 존 2면 축소 시 회전율 +8% 예상"
- [ ] **PHI 건강지수 카드** (A/B/C/D 등급)
- [ ] **CIP 비효율 점유율** 카드
- [ ] **이번주 평균 가동률** KPI (현재는 점유율만 표시)
- [ ] **이번 달 예상 매출** (지난달 비교 그래프 포함)

**수정 의견:**
- 현재 대시보드의 4개 KPI 카드를 기획에 맞게 재구성
- Action Card는 mockData 기반으로 3~4개의 추천 액션을 카드 UI로 표시
- 한 문장 진단은 PHI 데이터 기반으로 자동 생성하는 로직 필요
- 기존 "최근 입출차 내역" 사이드바는 유지하되, 아래에 Action Card 추가

---

### 3-6. 사용자 역할 체계 차이
> 기획과 현재 구현의 역할이 다름

| 기획 역할 | 현재 구현 역할 | 비고 |
|-----------|---------------|------|
| Super Admin | SUPER_ADMIN | 일치 |
| Owner (주차장 소유주) | - | **누락** |
| Operator (운영사 대표) | OPERATOR (운영사 관리자) | 유사 |
| Viewer (조회 전용) | - | **누락** |
| - | FIELD_MANAGER (현장 관리자) | 기획에 없음 |
| - | ACCOUNTANT (회계 담당자) | 기획에 없음 |

**수정 의견:**
- **Owner** 역할 추가 필요 — 주차장 소유주가 PHI, 매출 등을 조회하는 핵심 사용자
- **Viewer** 역할 추가 필요 — 읽기 전용 접근
- FIELD_MANAGER, ACCOUNTANT는 운영 측면에서 유용하므로 유지 권장
- 기획의 4개 역할 + 현재의 2개 추가 역할 = 총 6개 역할 체계로 통합 제안

---

## 4. 현재 구현에는 있지만 기획에 없는 것 (유지 여부 판단 필요)

| 현재 기능 | 라우트 | 판단 의견 |
|-----------|--------|-----------|
| **AI 에이전트** | `/ai-agent` | **유지 권장** — 기획에 없지만 부가 가치 높음, 향후 PHI/CIP 분석 결과를 AI로 제공 가능 |
| **통합 관제** | `/monitoring` | **유지 권장** — 기획의 "현장 하드웨어" 레이어에 해당, 실무 운영에 필수 |
| **주차장 관리 (CRUD)** | `/parking-lots` | **유지 필수** — 기획에 명시는 없지만 기본 마스터 데이터 관리 필수 |
| **정기권 관리** | `/regular-passes` | **유지 + 연동** — 기획에서 시뮬레이터 입력 변수로 활용, PHI 잠식도 계산에도 필요 |
| **할인/프로모션** | `/discounts` | **유지 + 연동** — 기획에서 시뮬레이터 입력 변수로 활용 |
| **정산 및 계약** | `/settlements` | **유지 권장** — 기획에 없지만 운영에 필수, Reports 메뉴에 포함 가능 |
| **매출 관리** | `/revenue` | **유지 + 강화** — 기획의 Reports에 해당, 시뮬레이터와 연계 |
| **입출차 로그** | `/logs` | **유지 필수** — CIP Flow의 원본 데이터, PHI 계산의 기초 |
| **시스템 상태** | `/system-health` | **유지 권장** — 운영 안정성 관리용 |
| **테넌트 관리** | `/tenants` | **유지 필수** — 멀티테넌트 SaaS 구조의 핵심 |

---

## 5. 메뉴 구조 재편 제안

기획의 메뉴 구조와 현재 기능을 통합하여 아래와 같이 재편 제안:

```
[Park OS 핵심] ─── 기획 신규
├─ 대시보드 (Executive Overview)     ← 기존 대시보드 개선
├─ 주차장 건강 리포트 (PHI)          ← 신규
├─ CIP Flow (주차장 MRI)             ← 신규
├─ 수익 시뮬레이터                    ← 신규
├─ EV & 특수차량 분석                 ← 신규

[운영 관리] ─── 기존 유지
├─ 통합 관제
├─ 주차장 관리
├─ 요금 정책
├─ 정기권 관리
├─ 할인/프로모션
├─ 입출차 로그

[정산/매출] ─── 기존 유지
├─ 매출 관리 (Reports)
├─ 정산 및 계약

[시스템] ─── 기존 유지
├─ AI 에이전트
├─ 사용자 관리
├─ 테넌트 관리
├─ 시스템 상태
├─ 시스템 설정
```

---

## 6. 작업 우선순위 제안

| 순위 | 작업 | 난이도 | 이유 |
|------|------|--------|------|
| **1** | 대시보드 개선 (Action Card, 한 문장 진단, PHI 카드) | 중 | 기존 화면 수정으로 즉시 효과 |
| **2** | PHI 페이지 신규 개발 | 상 | Park OS 핵심 차별화 기능, Heatmap 구현 필요 |
| **3** | CIP Flow 페이지 신규 개발 | 상 | 흐름 시각화 + 히스토그램 등 복잡한 차트 |
| **4** | Revenue Policy Simulator 페이지 | 중 | 슬라이더 UI + 실시간 계산 로직 |
| **5** | EV & 특수차량 분석 페이지 | 중 | mockData 추가 + 차트 구성 |
| **6** | 사용자 역할 체계 통합 | 하 | mockData 및 역할 정의 수정 |
| **7** | 메뉴 구조 재편 (Sidebar 그룹핑) | 하 | Sidebar.jsx 수정 |
| **8** | mockData 확장 (시간대별, EV 등) | 하 | 모든 신규 화면의 기반 데이터 |

---

## 7. 기술적 고려사항

### 추가 라이브러리 검토
- **Heatmap**: `@nivo/heatmap` 또는 Recharts 커스텀 구현
- **Sankey/Flow**: `@nivo/sankey` 또는 `d3-sankey`
- **Slider**: `rc-slider` 또는 HTML range input + 커스텀 스타일
- **Gauge Chart**: `recharts` 커스텀 또는 별도 라이브러리

### mockData 확장 필요 항목
- 시간대별(24h) × 요일별(7일) 입출차 데이터 (PHI Heatmap용)
- 주차권 유형별 입출차 데이터 (CIP Flow용)
- EV 차량 전용 입출차 + 충전 데이터
- 체류시간 분포 데이터 (히스토그램용)
- 시뮬레이션 기본 파라미터 데이터

---

## 8. 보완 검토 (2차 정밀 검토에서 추가 발견)

### 8-1. 기획 철학/방향성 — 작업지시서에서 누락된 핵심 문구

| # | PDF 원문 | 중요도 | 반영 위치 |
|---|---------|--------|-----------|
| 1 | **"보고서가 아니라 결정을 대신 준비해주는 화면"** — 대시보드 설계 핵심 철학 | 최상 | 대시보드 개선 시 UX 방향 |
| 2 | **"이 주차장은 지금 돈을 잘 벌고 있는가?"** — Executive Overview 화면 목적 | 상 | 대시보드 헤더 또는 서브타이틀 |
| 3 | **"문제는 어디에 있는가?"** — PHI View 화면 목적 | 상 | PHI 페이지 헤더 |
| 4 | **"차가 어떻게 들어오고, 얼마나 오래 머무는가?"** — CIP Flow 화면 목적 | 상 | CIP Flow 페이지 헤더 |
| 5 | **"바꾸면 얼마가 달라지는가?"** — Policy Simulator 화면 목적 | 상 | 시뮬레이터 페이지 헤더 |
| 6 | **"EV는 도움이 되는가, 방해인가?"** — EV 분석 화면 목적 | 상 | EV 페이지 헤더 |
| 7 | **"친환경이 아니라 '운영 관점' EV"** — EV 모듈의 접근 철학 | 중 | EV 분석 설계 방향 |

> 각 페이지에 화면 목적 문구를 서브타이틀로 표시하면 사용자가 화면의 의도를 즉시 파악할 수 있음

---

### 8-2. PHI 진단 라벨 누락

PDF 원문에 따르면 PHI는 **두 가지 표현 체계**를 가짐:
- **등급**: A / B / C / D (종합 점수 기반)
- **진단 키워드**: "정상 / 과밀 / 비효율 / 잠재" (한 줄 진단용)

작업지시서에는 A/B/C/D 등급만 기재했으나, **4가지 진단 키워드**도 함께 표시해야 함:

| 등급 | 진단 키워드 | 의미 |
|------|------------|------|
| A | 정상 | 가동률·회전율·매출 모두 양호 |
| B | 잠재 | 비어 있는 시간에 매출 기회 있음 |
| C | 비효율 | 정기권 잠식 또는 회전율 저하 |
| D | 과밀 | 피크 병목이 심하여 서비스 품질 저하 |

---

### 8-3. CIP Flow 효과 — "숨은 가치 도출" 누락

PDF 원문:
> CIP Flow 효과: **비어 있는 시간의 '숨은 가치' 도출** → 새로운 요금제 or 매출 발생 가능

이 핵심 목적이 작업지시서에 빠져 있음. CIP Flow는 단순 흐름 시각화가 아니라, **빈 시간대에서 수익 기회를 찾아주는 도구**임. 구현 시:
- 빈 시간대(파란 구간)를 클릭하면 "이 시간대에 외부차량 유치 시 예상 매출" 같은 팝업 제안
- 또는 Revenue Simulator로 연결하는 CTA 버튼 배치

---

### 8-4. EV 모듈 — "전용 주차요금제도 창출" 기능 누락

PDF 원문:
> EV 체류시간 점유 기여도 vs 매출 기여도: **전용 주차요금제도 창출 혹은 충전기와 연동**

작업지시서에는 "EV 점유율 vs 매출 기여도 비교 차트"만 기재했으나, 실제로는:
- [ ] EV 전용 요금제 제안 기능 (EV 충전 시간 기반 별도 요금 체계)
- [ ] EV 충전기 데이터 연동 (충전 시작/종료, 충전량 등)
- [ ] EV 충전 완료 후 미출차 차량 알림 (점유 낭비 감지)

---

### 8-5. 대시보드 KPI 카드 — 현재 vs 기획 정밀 비교

| 위치 | 현재 구현 | 기획 요구 | 차이 |
|------|----------|-----------|------|
| 카드 1 | 총 매출 (₩45,231,890) | **이번주 평균 가동률 (%)** | 완전 변경 |
| 카드 2 | 현재 입차 차량 (420대) | **이번 달 예상 매출 (₩)** — 지난달 비교 | 완전 변경, "예상"이 핵심 (예측치) |
| 카드 3 | 주차면 가동률 (86%) | **PHI 건강지수 (A/B/C/D)** | 완전 변경 |
| 카드 4 | 장애/알림 (3건) | **CIP 비효율 점유율 (%)** | 완전 변경 |

> **주의**: 기획에서 "이번 달 **예상** 매출"은 단순 집계가 아니라 **예측치**임. 현재까지의 매출 추세를 기반으로 월말 예상 매출을 계산하는 로직이 필요함.

---

### 8-6. 대시보드 매출 차트 — 실제 미구현 상태

현재 `Dashboard.jsx:111-113`에서 매출 차트 영역이 **placeholder**로 되어 있음:
```jsx
<div className="h-56 bg-slate-50 rounded-lg flex items-center justify-center text-slate-400 text-sm">
    차트 영역 (매출 추이)
</div>
```
- RevenueReport.jsx에서는 Recharts로 실제 차트가 구현되어 있음
- 대시보드에도 간단한 주간 매출 BarChart를 실제 구현해야 함

---

### 8-7. PHI View 레이아웃 — 좌/우 분할 구조 미명시

PDF 원문:
> **좌측**: PHI 구성 지표 (가동률/회전율/평균 체류시간/정기권 잠식도/피크 병목지수) → 종합 점수 A~D 등급
> **우측**: 병목 히트맵 (요일 × 시간대 Heatmap)

작업지시서에 레이아웃이 명시되지 않았으므로 추가:
- [ ] 2컬럼 레이아웃: 좌측 5개 지표 카드 + 등급, 우측 Heatmap
- [ ] 사용자 시나리오: "대표는 이 화면에서 **시간제 상품의 구성**을 기획함" (PDF 원문)

---

### 8-8. 수익모델(SaaS 티어)과 기능 매핑 — 누락

PDF에 명시된 SaaS 구독 모델을 기능에 매핑해야 UI 설계에 반영 가능:

| 티어 | 가격대 | 포함 기능 | UI 반영 |
|------|--------|-----------|---------|
| **Basic** | 기본 | PHI 리포트 + 기본 지표 + Reports | 기본 접근 가능 |
| **Pro** | 중급 | Basic + Revenue Simulator | Simulator 진입 시 Pro 배지 표시 |
| **Enterprise** | 프리미엄 | Pro + 맞춤 정책 + 자문 | 맞춤 설정 메뉴 표시 |
| **EV·에너지** | 추가 모듈 | EV & Special Vehicle 분석 | 별도 모듈 활성화 |

> 현 단계에서는 모든 기능을 열어두되, 향후 티어별 접근 제어 시 참고할 수 있도록 구조화 필요

---

### 8-9. 현장 하드웨어 — devices 데이터 누락

PDF의 아키텍처에 명시된 현장 하드웨어:
| 기획 하드웨어 | 현재 devices mockData | 상태 |
|-------------|---------------------|------|
| LPR | DEV-001~002, DEV-006 | ✅ 있음 |
| 정산기 | - | **누락** |
| EV 충전기 | - | **누락** |
| 초음파 센서 | - | **누락** |
| 차단기 (Breaker) | DEV-003~004, DEV-007 | ✅ 있음 |
| 전광판 (Display) | DEV-005 | ✅ 있음 |

- [ ] devices mockData에 정산기, EV 충전기, 초음파 센서 타입 추가 필요
- [ ] Monitoring 페이지에서 해당 장비 타입 표시 및 제어 UI 추가

---

### 8-10. 입출차 로그 데이터 모델 — 주차권 유형 필드 누락

PHI와 CIP Flow 계산에 필수적인 **주차권 유형** 필드가 현재 entryExitLogs에 없음:

현재 로그 필드: `id, vehicleNo, parkingLot, entryTime, exitTime, status, fee, image`

**추가 필요 필드:**
- [ ] `ticketType`: 주차권 유형 (정기권/할인권/일반권(시간제)/무료/일주차/EV)
- [ ] `vehicleType`: 차량 유형 (일반/EV/장애인/경차 등)
- [ ] `stayDuration`: 체류시간 (분 단위, 자동 계산)

> 이 필드들이 없으면 PHI의 "주차권별 평균 체류시간", "정기권 잠식도", CIP Flow의 "주차권 유형별 필터"가 구현 불가

---

### 8-11. 타겟 고객 — 의사결정 라인 강조

PDF 원문에서 Park OS의 진짜 고객을 명확히 지정:
> **"현장이 아니라 '결정권자'"** — 소유자, 운영사 대표, 자산운용 책임자, PM/FM 의사결정 라인

현재 코드베이스의 역할 중 FIELD_MANAGER(현장 관리자)는 기획의 타겟 고객이 아님. Park OS의 핵심 화면(PHI, CIP Flow, Simulator, EV)은 **경영진/의사결정자**를 위한 화면이므로:
- UI 톤앤매너: 복잡한 조작보다 **한눈에 파악 가능한 시각화** 우선
- 데이터 표현: 상세 테이블보다 **요약 카드 + 차트** 위주
- 액션: 직접 설정 변경이 아니라 **제안/권고** 형태

---

### 8-12. 현재 대시보드 매출 데이터 로직 문제

`Dashboard.jsx:57`에서 매출 계산이 부정확함:
```js
totalRevenue: selectedLotId === 'ALL' ? 45231890 : totalRevenue * 1500
```
- 하드코딩된 45,231,890과 `totalRevenue * 1500`이라는 임의 보정값 사용
- 기획의 "이번 달 **예상** 매출"을 구현하려면 실제 일별 매출 데이터 기반 예측 로직 필요
- mockData의 `revenueData.daily` 배열을 활용하여 일평균 매출 × 월 영업일수로 예측하는 방식 권장

---

## 9. 수정된 작업 우선순위 (2차 검토 반영)

| 순위 | 작업 | 난이도 | 이유 |
|------|------|--------|------|
| **0** | mockData 확장 (ticketType, vehicleType, 시간대별 데이터, EV 데이터, 신규 장비) | 중 | **모든 신규 화면의 전제 조건** — 이것 없이는 PHI/CIP/EV 구현 불가 |
| **1** | 대시보드 전면 개편 (KPI 4개 교체 + 한 문장 진단 + Action Card + 차트 실구현) | 상 | 기획 핵심, 현재 KPI 4개 모두 변경 필요 |
| **2** | PHI 페이지 신규 개발 (좌측 5지표+등급, 우측 Heatmap, 정상/과밀/비효율/잠재 라벨) | 상 | Park OS 핵심 차별화 |
| **3** | CIP Flow 페이지 신규 개발 (흐름 시각화 + 히스토그램 + "숨은 가치" 도출) | 상 | 복잡한 차트 구현 필요 |
| **4** | Revenue Policy Simulator 페이지 (좌측 슬라이더, 우측 즉시 결과) | 중 | 실시간 계산 로직 |
| **5** | EV & 특수차량 분석 페이지 (EV 전용 요금제 제안 + 충전기 연동) | 중 | EV mockData 기반 |
| **6** | 사용자 역할 체계 통합 (Owner, Viewer 추가) | 하 | mockData 수정 |
| **7** | 메뉴 구조 재편 (4그룹 사이드바 + 각 페이지 화면 목적 서브타이틀) | 하 | Sidebar.jsx 수정 |
| **8** | Monitoring 페이지 장비 추가 (정산기, EV 충전기, 초음파 센서) | 하 | devices mockData 확장 |

---

## 10. 결론

**기획의 Park OS는 "보고서가 아니라 결정을 대신 준비해주는 화면"** — 이 한 문장이 전체 방향입니다.

현재 구현은 **"운영 관리 도구"**(입출차, 요금, 정기권, 정산 CRUD) 수준이고, 기획이 요구하는 **"의사결정 OS"**(PHI 진단, CIP 흐름 분석, 수익 시뮬레이터, EV 분석)와는 본질적 차이가 있습니다.

### 핵심 작업 요약:
1. **mockData 확장** — ticketType/vehicleType 필드, 시간대별 데이터 추가 (전제 조건)
2. **대시보드 전면 개편** — KPI 4개 모두 교체 + 한 문장 진단 + Action Card
3. **4개 핵심 모듈 신규 개발** — PHI, CIP Flow, Simulator, EV 분석
4. **기존 운영 기능 유지** — 주차장 관리, 요금, 정기권, 할인, 정산, 로그 등 (기획에 없지만 필수)
5. **메뉴 재편 + 역할 통합** — 사이드바 그룹핑, Owner/Viewer 역할 추가

기존에 잘 구현된 운영 관리 기능을 유지하면서, 기획의 **4대 핵심 모듈을 상위에 배치**하고 데이터를 연동하는 방향이 최선입니다.
